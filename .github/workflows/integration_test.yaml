name: Integration tests

on:
  pull_request:

jobs:
  integration-tests:
    strategy:
      matrix:
        module: [agent, basic, nrpe, website]
      fail-fast: false
    uses: canonical/operator-workflows/.github/workflows/integration_test.yaml@main
    with:
      extra-arguments: -k ${{ matrix.module }}
      series: [xenial, bionic, focal]
    secrets: inherit
